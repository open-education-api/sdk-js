var Surfnet=Surfnet||{};
Surfnet.OnderwijsData=function(a,b,c){this.config={endpoint:a,auth:{token:b},version:c};this.init=function(){"/"!=this.config.endpoint.slice(-1)&&(this.config.endpoint+="/");void 0===this.config.version&&(this.config.version="1.0");this.config.endpoint+=this.config.version+"/"};this.createPersonClient=function(){return new this.PersonClient(this.config)};this.createBuildingClient=function(){return new this.BuildingClient(this.config)};this.createRoomClient=function(){return new this.RoomClient(this.config)};this.createGroupClient=function(){return new this.GroupClient(this.config)};this.createNewsFeedClient=function(){return new this.NewsFeedClient(this.config)};
this.createNewsItemClient=function(){return new this.NewsItemClient(this.config)};this.createCourseResultClient=function(){return new this.CourseResultClient(this.config)};this.createMinorClient=function(){return new this.MinorClient(this.config)};this.createTestResultClient=function(){return new this.TestResultClient(this.config)};this.createCourseClient=function(){return new this.CourseClient(this.config)};this.createScheduleClient=function(){return new this.ScheduleClient(this.config)};this.init()};
Surfnet.OnderwijsData.APIClient={};
Surfnet.OnderwijsData.APIClient.prototype=function(){function a(b){var a=[],d;for(d in b)b.hasOwnProperty(d)&&a.push(encodeURIComponent(d)+"="+encodeURIComponent(b[d]));return a.join("&")}function b(b){if(null==b&&"[object Function]"!=Object.prototype.toString.call(b))throw Error('Callback is missing, include "function (error, data) { }" as parameter');}function d(b){return"[object Function]"==Object.prototype.toString.call(b)}function c(){var b=this.config.endpoint;"/"!=b.slice(-1)&&(b+="/");return b}
function h(b,d,c){null!=d&&(b=b+"?"+a(d));var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open("GET",b,!0);e.setRequestHeader("Accept","application/json");null!=this.config.auth.token&&e.setRequestHeader("Authorization","Bearer "+this.config.auth.token);e.onreadystatechange=function(){var b;4==e.readyState&&(b=e.status,200==b?(b=JSON.parse(e.responseText),c(null,b)):c(e.responseText,null))};e.send()}function k(a,c,f){2==arguments.length&&d(c)&&(f=c,c=null);
if(null==a||d(a))throw Error('First argument should be "url"');b(f);h.call(this,a,c,f)}return{getList:function(a,g){1==arguments.length&&d(a)&&(g=a,a=null);b(g);var f=c.call(this)+this.modelUrl;h.call(this,f,a,g)},getById:function(b,a,f){2==arguments.length&&d(a)&&(f=a,a=null);if(null==b||d(b))throw Error('First argument should be "id"');var e=c.call(this)+this.modelUrl,e=e+("/"+b.toString());k.call(this,e,a,f)},get:k}}();Surfnet.OnderwijsData.Tools=function(){};
Surfnet.OnderwijsData.Tools.extend=function(a,b){var d=function(){};d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a};Surfnet.OnderwijsData.prototype.BuildingClient=function(a){this.config=a;this.modelUrl="buildings";this.getByLocation=function(b,a){this.get(this.config.endpoint+this.modelUrl+"/nearby",b,a)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.BuildingClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.CourseClient=function(a){this.config=a;this.modelUrl="courses"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.CourseClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.CourseResultClient=function(a){this.config=a;this.modelUrl="courseresults";this.getByOwner=function(b,a,c){b=b+"/"+this.modelUrl;this.get(b,a,c)};this.getByPersonId=function(b,a,c){this.get(this.config.endpoint+"persons/"+b+"/"+this.modelUrl,a,c)}};
Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.CourseResultClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.GroupClient=function(a){this.config=a;this.modelUrl="groups"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.GroupClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.MinorClient=function(a){this.config=a;this.modelUrl="minors"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.MinorClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.NewsFeedClient=function(a){this.config=a;this.modelUrl="newsfeeds"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.NewsFeedClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.NewsItemClient=function(a){this.config=a;this.modelUrl="newsitems"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.NewsItemClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.PersonClient=function(a){this.config=a;this.modelUrl="persons";this.getByLocation=function(b,a){this.get(this.config.endpoint+this.modelUrl+"/nearby",b,a)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.PersonClient,Surfnet.OnderwijsData.APIClient);Surfnet.OnderwijsData.prototype.RoomClient=function(a){this.config=a;this.modelUrl="rooms"};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.RoomClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.ScheduleClient=function(a){this.config=a;this.modelUrl="schedule";this.getByOwner=function(b,a,c){b=b+"/"+this.modelUrl;this.get(b,a,c)};this.getByPersonId=function(b,a,c){this.get(this.config.endpoint+"persons/"+b+"/"+this.modelUrl,a,c)};this.getByRoomId=function(a,d,c){this.get(this.config.endpoint+"rooms/"+a+"/"+this.modelUrl,d,c)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.ScheduleClient,Surfnet.OnderwijsData.APIClient);
Surfnet.OnderwijsData.prototype.TestResultClient=function(a){this.config=a;this.modelUrl="testresults";this.getByOwner=function(a,d,c){a=a+"/"+this.modelUrl;this.get(a,d,c)};this.getByPersonId=function(a,d,c){this.get(this.config.endpoint+"persons/"+a+"/"+this.modelUrl,d,c)}};Surfnet.OnderwijsData.Tools.extend(Surfnet.OnderwijsData.prototype.TestResultClient,Surfnet.OnderwijsData.APIClient);
